# CS441 Milestone 3

## Usage

- You can run main.java, make sure you are running from the root directory of the project. The default soucre code is
  called "working1.txt." You can also try working2.txt
- You can also run the following command(when you have the main.class file):
    - java -cp out/production/milestone1 main <sourcecode.txt>
- Since with incomplete phi functions and while, the program may not work as expected with some source code. But the
  type-check and type-based optimization are completed as what I understand.

## Type-based optimization:

- Tag checks
    - removed tag checks for field access and method calls.

- Field Access:
    - Removed the field map
        - -Correspondingly, I removed this IR so I don't have to jump to 2nd slot for field map: %1 = %x0 + 8
        - I can directly load the object and access the field
    - No longer need to go to field address and store @fieldsMap
        - removed the IR:
            - %1 = %x0 + 8
            - store(%1, @fieldsA)

- Method calls
    - No longer need to check if the method lookup succeeds

## What's included

- working1.txt
    - This included a source code that can be run without any type errors.
- failed1.txt
    - This included a source code that tries to access a field that is not defined in the class.
- working2.txt
    - This included a source code that can be run without any type errors.
- failed2.txt
    - This included a source code that tries print a class
- ourput1.ir
    - this includes IR generated from working2.txt source code using the Milestone 1 code
    - although many of the IRs are incomplete because it was generated by Milestone 1 code, I fixed some in Milestone3
- output2.ir
    - this includes IR generated from working2.txt source code using the Milestone 3 code (type-based optimization)
  


